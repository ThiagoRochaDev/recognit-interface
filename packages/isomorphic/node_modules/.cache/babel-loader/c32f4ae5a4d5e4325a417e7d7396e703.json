{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\tiago\\\\Desktop\\\\THg\\\\Projetos WEB\\\\Faceapp\\\\interface_facerecognition\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\tiago\\\\Desktop\\\\THg\\\\Projetos WEB\\\\Faceapp\\\\interface_facerecognition\\\\shared\\\\isomorphic\\\\containers\\\\Profile\\\\Profile.js\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Spin from '@iso/ui/Antd/Spin/Spin';\nimport Modal from '@iso/ui/Antd/Modal/Modal';\nimport Container from '@iso/ui/UI/Container/Container';\nimport AvatarCard from '@iso/components/AvatarCard/AvatarCard';\nimport Posts from './Posts/Posts';\nimport Followers from './Followers/Followers';\nimport Following from './Following/Following';\nimport Wrapper, { Banner, Navigation, ContentWrapper } from './Profile.styles';\nimport { useSelector, useDispatch } from 'react-redux';\nimport profileActions from '@iso/redux/profile/actions';\nimport axios from 'axios';\nimport '@uppy/core/dist/style.css';\nimport '@uppy/dashboard/dist/style.css';\nimport Uppy from '@uppy/core';\nimport Tus from '@uppy/tus';\nimport GoogleDrive from '@uppy/google-drive';\nimport Dropbox from '@uppy/dropbox';\nimport Instagram from '@uppy/instagram';\nimport { Dashboard } from '@uppy/react';\nimport AwsS3 from '@uppy/aws-s3';\n\nconst MyProfile = () => {\n  const data = useSelector(state => state.profile.data);\n  const loading = useSelector(state => state.profile.loading);\n  const dispatch = useDispatch();\n  const getProfile = useCallback(() => dispatch(profileActions.fetchProfileDataStart()), [dispatch]);\n\n  const postImage = () => {\n    var albumBucketName = \"BUCKET_NAME\";\n    var bucketRegion = \"REGION\";\n    AWS.config.update({\n      region: bucketRegion,\n      credentials: new AWS.Credentials({\n        accessKeyId: 'akid',\n        secretAccessKey: 'secret'\n      })\n    });\n    var upload = new AWS.S3.ManagedUpload({\n      params: {\n        Bucket: albumBucketName,\n        Key: photoKey,\n        Body: file\n      }\n    });\n    var promise = upload.promise();\n    promise.then(function (data) {\n      alert(\"Successfully uploaded photo.\");\n      viewAlbum(albumName);\n    }, function (err) {\n      return alert(\"There was an error uploading your photo: \", err.message);\n    });\n  };\n\n  const uppy = Uppy({\n    debug: true,\n    autoProceed: false,\n    restrictions: {\n      maxFileSize: 100000000000,\n      maxNumberOfFiles: 10,\n      minNumberOfFiles: 1,\n      allowedFileTypes: ['image/*', 'video/*']\n    }\n  });\n  uppy.use(AwsS3, {\n    // use the AwsS3 plugin                                  \n    fields: [],\n\n    // empty array \n    getUploadParameters(file) {\n      // here we prepare our request to the server for the upload URL\n      return fetch('https://04ie6y9uhl.execute-api.us-east-1.amazonaws.com/dev/client_upload', {\n        // we'll send the info asynchronously via fetch to our nodejs server endpoint, '/uploader' in this case\n        method: 'POST',\n        // all the examples I found via the Uppy site used 'PUT' and did not work\n        headers: {\n          'content-type': 'application/x-www-form-urlencoded' // examples I found via the Uppy site used 'content-type': 'application/json' and did not work\n\n        },\n        body: JSON.stringify({\n          filename: file.name,\n          // here we are passing data to the server/back end\n          contentType: file.type,\n          metadata: {\n            'name': file.meta['name'],\n            // here we pass the 'name' variable to the back end, with 'file.meta['name']' referring to the 'name' from our metaFields id above\n            'caption': file.meta['caption'] // here we pass the 'caption' variable to the back end, with 'file.meta['caption']' referring to the 'caption' from our metaFields id above\n\n          }\n        })\n      }).then(response => {\n        return response.json(); // return the server's response as a JSON promise\n      }).then(data => {\n        console.log('>>>', data); // here you can have a look at the data the server sent back - get rid of this for production!\n\n        return {\n          method: data.method,\n          // here we send method, url, fields and headers to the AWS S3 bucket\n          url: data.url,\n          fields: data.fields,\n          headers: data.headers\n        };\n      });\n    }\n\n  });\n  uppy.on('complete', result => {\n    console.log('successful files:', result.successful);\n    console.log('failed files:', result.failed);\n  });\n\n  const _useState = useState('post'),\n        _useState2 = _slicedToArray(_useState, 2),\n        active = _useState2[0],\n        setActive = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        visible = _useState4[0],\n        setVisible = _useState4[1];\n\n  useEffect(() => {\n    getProfile();\n  }, [getProfile]);\n\n  const handleMenu = type => {\n    if (type === 'post') {\n      setActive(type);\n    }\n\n    if (type === 'upload_picture') {\n      setActive(type);\n      setVisible(true);\n    }\n\n    if (type === 'following') {\n      setActive(type);\n      setVisible(true);\n    }\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n    setActive('post');\n  };\n\n  return React.createElement(Wrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, loading !== true ? React.createElement(React.Fragment, null, React.createElement(Banner, {\n    className: \"profile-banner\",\n    style: {\n      backgroundImage: \"url(\".concat(data.profile_bg, \")\")\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, React.createElement(Container, {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, React.createElement(AvatarCard, {\n    avatar: data.avatar,\n    name: data.name,\n    username: data.username,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }))), React.createElement(Navigation, {\n    className: \"navigation\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(Container, {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: active === 'post' ? 'active' : '',\n    onClick: () => handleMenu('post'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, data.post.length), \" Gallery\"), React.createElement(\"li\", {\n    className: active === 'upload_picture' ? 'active' : '',\n    onClick: () => handleMenu('upload_picture'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    type: \"button\",\n    class: \"ant-btn ant-btn-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, \" Upload Pictures\")), React.createElement(\"li\", {\n    className: active === 'following' ? 'active' : '',\n    onClick: () => handleMenu('following'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, data.following.length), \" Client List\")))), React.createElement(ContentWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(Container, {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, React.createElement(Posts, {\n    avatar: data.avatar,\n    username: data.username,\n    data: data.post,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }), React.createElement(Modal, {\n    wrapClassName: \"follow-modal\",\n    visible: visible,\n    onCancel: handleCancel,\n    footer: null,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, active === 'upload_picture' && React.createElement(Dashboard, {\n    plugins: ['GoogleDrive', 'Dropbox', 'Instagram'],\n    uppy: uppy,\n    inline: true,\n    target: \".DashboardContainer\",\n    replaceTargetContent: true,\n    showProgressDetails: true,\n    note: \"\",\n    height: 470,\n    width: \"100%\",\n    metaFields: [{\n      id: 'name',\n      name: 'Name',\n      placeholder: 'file name'\n    }, {\n      id: 'caption',\n      name: 'Caption',\n      placeholder: 'describe what the image is about'\n    }],\n    browserBackButtonClose: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }), active === 'following' && React.createElement(Following, {\n    data: data.following,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }))))) : React.createElement(\"div\", {\n    style: {\n      minHeight: '150px',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, React.createElement(Spin, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  })));\n};\n\nexport default MyProfile;","map":{"version":3,"sources":["C:/Users/tiago/Desktop/THg/Projetos WEB/Faceapp/interface_facerecognition/shared/isomorphic/containers/Profile/Profile.js"],"names":["React","useState","useEffect","useCallback","Spin","Modal","Container","AvatarCard","Posts","Followers","Following","Wrapper","Banner","Navigation","ContentWrapper","useSelector","useDispatch","profileActions","axios","Uppy","Tus","GoogleDrive","Dropbox","Instagram","Dashboard","AwsS3","MyProfile","data","state","profile","loading","dispatch","getProfile","fetchProfileDataStart","postImage","albumBucketName","bucketRegion","AWS","config","update","region","credentials","Credentials","accessKeyId","secretAccessKey","upload","S3","ManagedUpload","params","Bucket","Key","photoKey","Body","file","promise","then","alert","viewAlbum","albumName","err","message","uppy","debug","autoProceed","restrictions","maxFileSize","maxNumberOfFiles","minNumberOfFiles","allowedFileTypes","use","fields","getUploadParameters","fetch","method","headers","body","JSON","stringify","filename","name","contentType","type","metadata","meta","response","json","console","log","url","on","result","successful","failed","active","setActive","visible","setVisible","handleMenu","handleCancel","backgroundImage","profile_bg","avatar","username","post","length","following","id","placeholder","minHeight","display","alignItems","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport Spin from '@iso/ui/Antd/Spin/Spin';\nimport Modal from '@iso/ui/Antd/Modal/Modal';\nimport Container from '@iso/ui/UI/Container/Container';\nimport AvatarCard from '@iso/components/AvatarCard/AvatarCard';\nimport Posts from './Posts/Posts';\nimport Followers from './Followers/Followers';\nimport Following from './Following/Following';\nimport Wrapper, { Banner, Navigation, ContentWrapper } from './Profile.styles';\nimport { useSelector, useDispatch } from 'react-redux';\nimport profileActions from '@iso/redux/profile/actions';\nimport axios from 'axios';\nimport '@uppy/core/dist/style.css';\nimport '@uppy/dashboard/dist/style.css';\nimport Uppy from '@uppy/core';\nimport Tus from '@uppy/tus';\nimport GoogleDrive from '@uppy/google-drive';\nimport Dropbox from '@uppy/dropbox';\nimport Instagram from '@uppy/instagram';\nimport { Dashboard } from '@uppy/react';\nimport AwsS3 from '@uppy/aws-s3'\n\n\nconst MyProfile = () => {\n  \n  const data = useSelector(state => state.profile.data);\n  const loading = useSelector(state => state.profile.loading);\n  const dispatch = useDispatch();\n  const getProfile = useCallback(\n    () => dispatch(profileActions.fetchProfileDataStart()),\n    [dispatch]\n  );\n\n  const postImage = () => {\n      var albumBucketName = \"BUCKET_NAME\";\n      var bucketRegion = \"REGION\";\n\n      AWS.config.update({\n        region: bucketRegion,\n        credentials: new AWS.Credentials({\n          accessKeyId: 'akid', secretAccessKey: 'secret',\n        })\n      });\n\n      var upload = new AWS.S3.ManagedUpload({\n        params: {\n          Bucket: albumBucketName,\n          Key: photoKey,\n          Body: file\n        }\n      });\n\n      var promise = upload.promise();\n\n      promise.then(\n        function(data) {\n          alert(\"Successfully uploaded photo.\");\n          viewAlbum(albumName);\n        },\n        function(err) {\n          return alert(\"There was an error uploading your photo: \", err.message);\n        }\n      );\n    }\n\n  \n\n\n  const uppy = Uppy({\n    debug: true,\n    autoProceed: false,\n    restrictions: {\n      maxFileSize: 100000000000,\n      maxNumberOfFiles: 10,\n      minNumberOfFiles: 1,\n      allowedFileTypes: ['image/*', 'video/*'],\n    },\n  });\n    \n    uppy.use(AwsS3, { // use the AwsS3 plugin                                  \n      fields: [ ], // empty array \n      getUploadParameters(file){ // here we prepare our request to the server for the upload URL\n         return fetch('https://04ie6y9uhl.execute-api.us-east-1.amazonaws.com/dev/client_upload', { // we'll send the info asynchronously via fetch to our nodejs server endpoint, '/uploader' in this case\n            method: 'POST', // all the examples I found via the Uppy site used 'PUT' and did not work\n            headers: {\n                'content-type': 'application/x-www-form-urlencoded', // examples I found via the Uppy site used 'content-type': 'application/json' and did not work\n            },\n            body: JSON.stringify({\n                 filename: file.name, // here we are passing data to the server/back end\n                 contentType: file.type,\n                 metadata: {\n                     'name': file.meta['name'], // here we pass the 'name' variable to the back end, with 'file.meta['name']' referring to the 'name' from our metaFields id above\n                     'caption': file.meta['caption'] // here we pass the 'caption' variable to the back end, with 'file.meta['caption']' referring to the 'caption' from our metaFields id above\n                  },\n            })\n         }).then((response) => {\n             return response.json(); // return the server's response as a JSON promise\n         }).then((data) => {\n             console.log('>>>', data); // here you can have a look at the data the server sent back - get rid of this for production!\n             return {\n                method: data.method, // here we send method, url, fields and headers to the AWS S3 bucket\n                url: data.url,\n                fields: data.fields,\n                headers: data.headers,\n             };\n         });\n       },\n    });\n    uppy.on('complete', result => {\n      \n      console.log('successful files:', result.successful);\n      console.log('failed files:', result.failed);\n    });\n\n  const [active, setActive] = useState('post');\n  const [visible, setVisible] = useState(false);\n\n  useEffect(() => {\n    getProfile();\n  }, [getProfile]);\n\n  const handleMenu = type => {\n    if (type === 'post') {\n      setActive(type);\n    }\n    if (type === 'upload_picture') {\n      \n      setActive(type);\n      setVisible(true);\n    }\n    if (type === 'following') {\n      setActive(type);\n      setVisible(true);\n    }\n    \n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n    setActive('post');\n  };\n\n  return (\n    <Wrapper>\n      {loading !== true ? (\n        <>\n          <Banner\n            className=\"profile-banner\"\n            style={{ backgroundImage: `url(${data.profile_bg})` }}\n          >\n            <Container className=\"container\">\n              <AvatarCard\n                avatar={data.avatar}\n                name={data.name}\n                username={data.username}\n              />\n            </Container>\n          </Banner>\n\n          <Navigation className=\"navigation\">\n            <Container className=\"container\">\n              <ul className=\"menu\">\n                <li\n                  className={active === 'post' ? 'active' : ''}\n                  onClick={() => handleMenu('post')}\n                >\n                  <strong>{data.post.length}</strong> Gallery\n                </li>\n                <li\n                  className={active === 'upload_picture' ? 'active' : ''}\n                  onClick={() => handleMenu('upload_picture')}\n                >\n                  <strong type=\"button\" class=\"ant-btn ant-btn-primary\"> Upload Pictures</strong>\n                </li>\n                <li\n                  className={active === 'following' ? 'active' : ''}\n                  onClick={() => handleMenu('following')}\n                >\n                  <strong>{data.following.length}</strong> Client List\n                </li>\n              </ul>\n            </Container>\n          </Navigation>\n\n          <ContentWrapper>\n            <Container className=\"container\">\n              <Posts\n                avatar={data.avatar}\n                username={data.username}\n                data={data.post}\n              />\n              <Modal\n                wrapClassName=\"follow-modal\"\n                visible={visible}\n                onCancel={handleCancel}\n                footer={null}\n              >\n                {active === 'upload_picture' && \n                <Dashboard\n                    plugins={['GoogleDrive', 'Dropbox', 'Instagram']}\n                    uppy={uppy}\n                    inline={true}\n                    target=\".DashboardContainer\"\n                    replaceTargetContent={true}\n                    showProgressDetails={true}\n                    note=\"\"\n                    height={470}\n                    width=\"100%\"\n                    metaFields={[\n                      { id: 'name', name: 'Name', placeholder: 'file name' },\n                      {\n                        id: 'caption',\n                        name: 'Caption',\n                        placeholder: 'describe what the image is about',\n                      },\n                    ]}\n                    browserBackButtonClose={true}\n                  />}\n                {active === 'following' && <Following data={data.following} />}\n              </Modal>\n            </Container>\n          </ContentWrapper>\n        </>\n      ) : (\n        <div\n          style={{\n            minHeight: '150px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n          }}\n        >\n          <Spin />\n        </div>\n      )}\n    </Wrapper>\n  );\n};\n\nexport default MyProfile;\n"]},"metadata":{},"sourceType":"module"}